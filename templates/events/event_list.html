<!-- templates/events/event_list.html -->
{% extends "base.html" %}

{% block content %}
<h1>Список мероприятий</h1>

<form method="get">
    <input type="text" name="search" placeholder="Поиск..." value="{{ request.GET.search }}">
    <select name="genre">
        <option value="">Все жанры</option>
        {% for g in genres %}
            <option value="{{ g }}" {% if g == request.GET.genre %}selected{% endif %}>{{ g }}</option>
        {% endfor %}
    </select>
    <select name="city">
        <option value="">Все города</option>
        {% for c in cities %}
            <option value="{{ c }}" {% if c == request.GET.city %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
    </select>
    <button type="submit">Фильтровать</button>
</form>

<ul>
    {% for event in events %}
    <li>
        <h2><a href="{% url 'events:event_detail' event.pk %}">{{ event.title }}</a></h2>
        <p><strong>{{ event.city }}</strong> | {{ event.genre }} | {{ event.event_date }}</p>
    </li>
    {% empty %}
    <li>Мероприятия не найдены.</li>
    {% endfor %}
</ul>

{% if is_paginated %}
<div>
    {% if events.has_previous %}
        <a href="?page={{ events.previous_page_number }}">Назад</a>
    {% endif %}

    <span>Страница {{ events.number }} из {{ events.paginator.num_pages }}</span>

    {% if events.has_next %}
        <a href="?page={{ events.next_page_number }}">Вперёд</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
